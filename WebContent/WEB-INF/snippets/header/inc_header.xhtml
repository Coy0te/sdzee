<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" 
				xmlns:f="http://java.sun.com/jsf/core" xmlns:o="http://omnifaces.org/ui" xmlns:fn="http://java.sun.com/jsp/jstl/functions"
				xmlns:uf="http://sdzee.com/functions/functions">
	<div id="mainHeader">
		<div id="headerTop">
			<div id="mainMenu" class="largeurLimite">
				<div id="menuUp">
					<div class="UpMob">
						<h:link id="logo" outcome="/index" />
					</div>
					<span class="sep"></span>
					
						<h:link styleClass="login" outcome="/connection" rendered="#{member == null}">
							<f:param name="urlOrigine" value="#{request.requestURI}" />
							<f:param name="queryStringOrigine" value="#{request.queryString}" />
							<div class="zozorLogin"></div>
							<div id="login">Rejoignez-nous</div>
						</h:link>
					<h:panelGroup rendered="#{member != null}">
						<div id="memberInfos">
							<div class="userInfos">
								<span class="separatorBig"></span>
								<div class="headerUser">
									<h:link id="profileHeader" outcome="/profile" styleClass="dropdown-toggle secondaryLink">
										<f:param name="memberId" value="#{member.id}"/>
										<div class="ProfileLink"></div>
										<h:graphicImage styleClass="memberAvatar" library="default" name="images/membres/avatar_defaut.png" alt="avatar" />
									</h:link>
								</div>
							</div>
	
							<h:outputText value="#{member.nickName}"/>
							<o:form includeViewParams="true">
								<h:commandLink value="Déconnexion" action="#{logonBean.logout}" />
							</o:form>
							
							<h:link outcome="/privateTopics" styleClass="dropdown-toggle secondaryLink">
								Mes MP (#{fn:length(privateNotificationsBean.privateNotifications)})
							</h:link>
							
							<div id="notificationsCount">
								<h:outputText value="Mes notifs (#{fn:length(notificationsBean.notifications)})"/>
								<ul id="notificationsList">
									<ui:repeat value="#{notificationsBean.notifications}" var="item">
									<li>
										<h:link outcome="/topic">
											<f:param name="topicId" value="#{item.topicId}" />
											<f:param name="responseId" value="#{item.post.id}" />
											#{item.post.author.nickName} a répondu au sujet "#{item.post.topic.title}" #{uf:convertDateTime(item.post.creationDate)}
										</h:link>
									</li>
									</ui:repeat>
								</ul>
							</div>
							
							<ui:include src="inc_menu.xhtml" />
						</div>
					</h:panelGroup>
				</div>
				<div id="menuDown">
					<div class="contentDown">
						<ul class="menu">
							<li class="sep"></li>
							<li><h:link value="Tutoriels" outcome="/tutorials" /></li>
							<li class="sep"></li>
							<li><h:link value="Forums" outcome="/forums" /></li>
							<li class="sep"></li>
							<li><h:link value="Admin" outcome="/admin/admin" rendered="#{member != null and member.rights == 4}" /></li>
							<li class="sep"></li>
						</ul>
						<div id="navmenuRight">
							<h:form styleClass="searchForm">
								<h:inputText placeholder="Recherche" name="q"/>
								<h:commandButton action="search"/>
							</h:form>
						</div>
					</div>
				</div>
			</div>
			<div class="headGradient">
				<div></div>
				<div></div>
			</div>
		</div>
		<div id="headerMiddle">
			<div class="largeurLimite">
				<h:link><div class="titlePicture #{logoPage}"></div></h:link>
				<h1>
					<h:link>#{pageTitle}</h:link>
				</h1>
				<p>#{pageDescription}</p>
			</div>
		</div>
		<div class="headGradient">
			<div></div>
			<div></div>
		</div>
		<div id="headerBreadcrumb">
			<div class="largeurLimite">
				<ul id="breadcrumbtrail">
					<ui:repeat value="#{breadCrumb}" var="item" varStatus="statut">
					<li class="#{statut.index==0?'home':''}">
						<h:outputLink value="#{item.url}" rendered="#{item.url != null}">#{item.title}</h:outputLink>
						<h:outputText value="#{item.title}" rendered="#{item.url == null}"/>
					</li>
					</ui:repeat>
				</ul>
			</div>
		</div>
	</div>
</ui:composition>
