<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" 
				template="/WEB-INF/templates/template_base.xhtml">
	<ui:param name="sujet" value="#{reponsesBean.getSujet(param['sujetId'])}"/>
	<ui:define name="title">
		Liste des réponses au sujet
	</ui:define>
	<ui:define name="header">
		<ui:include src="/WEB-INF/snippets/header/inc_header.xhtml">
			<ui:param name="breadCrumb" value="#{reponsesBean.getBreadCrumb(sujet)}"/>
			<ui:param name="titrePage" value="Forums des Zéros"/>
			<ui:param name="descriptionPage" value="Une question ? Pas de panique, on va vous aider !"/>
			<ui:param name="logoPage" value="forumSdz"/>
		</ui:include>
	</ui:define>
	<ui:define name="body">
		<h1>
			<h:link>
				<f:param name="sujetId" value="#{param['sujetId']}" />
				#{sujet.titre}
			</h:link>
		</h1>
		<div class="comments">
			<div class="row" id="op">
				<div class="userInfos">
					<div class="avatar">
						<div class="author">
							<h:link outcome="/membres">
								<f:param name="membreId" value="#{sujet.auteur.id}"/>
								#{sujet.auteur.pseudo}
							</h:link>
						</div>
						<h:link outcome="/membres">
							<f:param name="membreId" value="#{sujet.auteur.id}"/>
							<h:graphicImage library="default" name="images/membres/#{sujet.auteur.avatar == null ? 'avatar_defaut.png' : sujet.auteur.avatar}" alt="avatar" />
						</h:link>
					</div>
				</div>
				<div class="comment">
					<div class="content">
						<h:link class="date">
							<f:param name="sujetId" value="#{param['sujetId']}" />
							Le #{sujet.dateCreation}
						</h:link>
						<div class="message">
							#{sujet.texte}
						</div>
					</div>
				</div>
			</div>
			<ui:repeat value="#{reponsesBean.getReponses(param['sujetId'])}" var="reponse">
			<div class="row">
				<div class="userInfos">
					<div class="avatar">
						<div class="author">
							<h:link outcome="/membres">
								<f:param name="membreId" value="#{reponse.auteur.id}"/>
								#{reponse.auteur.pseudo}
							</h:link>
						</div>
						<h:link outcome="/membres">
							<f:param name="membreId" value="#{reponse.auteur.id}"/>
							<h:graphicImage library="default" name="images/membres/#{reponse.auteur.avatar == null ? 'avatar_defaut.png' : reponse.auteur.avatar}" alt="avatar" />
						</h:link>
					</div>
				</div>
				<div class="comment">
					<div class="content">
						<h:link class="date">
							<f:param name="sujetId" value="#{param['sujetId']}" />
							Le #{reponse.dateCreation}
						</h:link>
						<div class="message">
							#{reponse.texte}
						</div>
					</div>
				</div>
			</div>
			</ui:repeat>
		</div>
		<div id="newComment" class="message">
			<h2>Répondre au sujet : #{sujet.titre}</h2>
			<h:form rendered="#{membre != null}">
				<h:inputTextarea id="texte" placeholder="Rédigez votre réponse ici" value="#{reponsesBean.texteReponse}" />
				<h:message id="texteMessage" for="texte" errorClass="erreur" />
				<h:commandButton value="Répondre" type="submit" action="#{reponseBean.repondre()}" styleClass="btn btn-primary" />
				<h:commandButton value="Aperçu" type="button" styleClass="btn showMarkdownOverview" />
				<h:commandButton value="Message semi-auto" type="button" styleClass="btn btn-inverse" rendered="#{membre.droits>=3}"/>
			</h:form>
		</div>
	</ui:define>
	<ui:define name="footer">
		<ui:include src="/WEB-INF/snippets/footer/inc_footer.xhtml" />
	</ui:define>
</ui:composition>