<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" 
				template="/WEB-INF/templates/template.xhtml">
	<ui:define name="title">
		Liste des sujets du forum
	</ui:define>
	<ui:define name="header">
		<ui:include src="/WEB-INF/snippets/header/inc_header.xhtml" />
	</ui:define>
	<ui:define name="body">
    	<ul>
		<ui:repeat value="#{listerSujetsBean.getSujetsParForum(param['forumId'])}" var="sujet">
		    <li>
                <div>
                    <div>
                        <a href="#{request.contextPath}/forum/sujet/#{sujet.titre}">
                            <h3>#{sujet.titre}</h3>
                            <span>Par <strong>#{sujet.auteur.pseudo}</strong> Le #{sujet.dateCreation}</span>
                        </a>
                    </div>
	                <div>
					    <p>#{listerReponsesBean.getDecompteReponsesParSujet(sujet) + 1} #{listerReponsesBean.getDecompteReponsesParSujet(sujet) == 0 ? 'message' : 'messages' }</p>
					</div>
	                <div>
		            	<a href="#{request.contextPath}/forum/sujet/#{sujet.titre}/##{listerReponsesBean.getDerniereReponseParSujet(sujet).id}">
			          		Dernier message par
			          		<strong>#{listerReponsesBean.getDerniereReponseParSujet(sujet) != null ? listerReponsesBean.getDerniereReponseParSujet(sujet).auteur.pseudo : sujet.auteur.pseudo}</strong>
			        		<br/>#{listerReponsesBean.getDerniereReponseParSujet(sujet).dateCreation}
		        		</a>
	    			</div>
                </div>
            </li>
		</ui:repeat>
		</ul>
	</ui:define>
	<ui:define name="footer">
		<ui:include src="/WEB-INF/snippets/footer/inc_footer.xhtml" />
	</ui:define>
</ui:composition>